# äº‹ä»¶æé†’ç³»ç»Ÿ - åç«¯å®ç°å®ŒæˆæŠ¥å‘Š

## é¡¹ç›®æ¦‚è¿°

æˆ‘ä»¬æˆåŠŸå®ç°äº†å®Œæ•´çš„äº‹ä»¶è®°å½•å’Œæ™ºèƒ½æé†’ç³»ç»Ÿï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäº Golang + MongoDB + JWT çš„ç°ä»£åŒ– Web API æœåŠ¡ã€‚

## ğŸ“‹ å·²å®ŒæˆåŠŸèƒ½

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

#### 1. äº‹ä»¶ç®¡ç†ç³»ç»Ÿ (`/api/events`)
- âœ… **CRUD æ“ä½œ**: åˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤äº‹ä»¶
- âœ… **äº‹ä»¶å¾ªç¯**: æ”¯æŒæ—¥ã€å‘¨ã€æœˆã€å¹´åº¦é‡å¤äº‹ä»¶
- âœ… **æ—¥å†è§†å›¾**: æŒ‰å¹´æœˆæŸ¥çœ‹äº‹ä»¶
- âœ… **æœç´¢åŠŸèƒ½**: åŸºäºå…³é”®è¯çš„äº‹ä»¶æœç´¢
- âœ… **å³å°†åˆ°æ¥**: è·å–æœªæ¥ N å¤©çš„äº‹ä»¶
- âœ… **åˆ†é¡µæŸ¥è¯¢**: æ”¯æŒå¤§é‡æ•°æ®çš„åˆ†é¡µå±•ç¤º

#### 2. æ™ºèƒ½æé†’ç³»ç»Ÿ (`/api/reminders`)
- âœ… **æé†’ç®¡ç†**: å®Œæ•´çš„æé†’ CRUD æ“ä½œ
- âœ… **å¤šç§æé†’ç±»å‹**: æ”¯æŒ email å’Œåº”ç”¨å†…æé†’
- âœ… **æ™ºèƒ½è°ƒåº¦**: åå°è‡ªåŠ¨æé†’å‘é€æœåŠ¡
- âœ… **æš‚åœåŠŸèƒ½**: æ”¯æŒæé†’æš‚åœå’Œé‡æ–°å®‰æ’
- âœ… **å³å°†å‘é€**: æŸ¥çœ‹å³å°†å‘é€çš„æé†’åˆ—è¡¨

#### 3. æ™ºèƒ½ä»ªè¡¨æ¿ (`/api/dashboard`)
- âœ… **æ•°æ®èšåˆ**: ç»¼åˆå±•ç¤ºäº‹ä»¶ã€ä»»åŠ¡ã€æé†’æ•°æ®
- âœ… **ä»»åŠ¡æ’åº**: åŸºäºç´§æ€¥åº¦å’Œé‡è¦æ€§çš„æ™ºèƒ½ç®—æ³•
- âœ… **é…ç½®ç®¡ç†**: ç”¨æˆ·å¯è‡ªå®šä¹‰æ’åºæƒé‡é…ç½®
- âœ… **ç»Ÿè®¡ä¿¡æ¯**: æä¾›å®Œæ•´çš„æ•°æ®ç»Ÿè®¡

### ğŸ›  æŠ€æœ¯æ¶æ„

#### åç«¯æŠ€æœ¯æ ˆ
- **è¯­è¨€**: Go 1.23+
- **æ•°æ®åº“**: MongoDB 
- **è®¤è¯**: JWT Bearer Token
- **è·¯ç”±**: Gorilla Mux
- **æ–‡æ¡£**: Swagger/OpenAPI
- **éƒ¨ç½²**: Docker å®¹å™¨åŒ–

#### é¡¹ç›®ç»“æ„
```
backend-go/
â”œâ”€â”€ cmd/api/               # ä¸»åº”ç”¨å…¥å£
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ api/              # HTTP å¤„ç†ç¨‹åº
â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/         # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ auth/            # JWT è®¤è¯
â”‚   â””â”€â”€ observability/   # æ—¥å¿—å’Œç›‘æ§
â”œâ”€â”€ docs/                # API æ–‡æ¡£
â””â”€â”€ docker/              # å®¹å™¨é…ç½®
```

#### æ ¸å¿ƒç»„ä»¶å®ç°

**1. æ•°æ®æ¨¡å‹å±‚** (`internal/models/`)
- `event.go`: äº‹ä»¶æ¨¡å‹ï¼Œæ”¯æŒå¾ªç¯æ¨¡å¼
- `reminder.go`: æé†’æ¨¡å‹ï¼ŒåŒ…å«è°ƒåº¦é€»è¾‘
- `task.go`: ä»»åŠ¡æ¨¡å‹ï¼Œæ”¯æŒä¼˜å…ˆçº§è®¡ç®—

**2. æœåŠ¡å±‚** (`internal/services/`)
- `event_service.go`: äº‹ä»¶ä¸šåŠ¡é€»è¾‘
- `reminder_service.go`: æé†’ç®¡ç†æœåŠ¡
- `reminder_scheduler.go`: åå°æé†’è°ƒåº¦å™¨
- `task_sort_service.go`: æ™ºèƒ½ä»»åŠ¡æ’åºç®—æ³•

**3. API å±‚** (`internal/api/`)
- `event_routes.go`: äº‹ä»¶ HTTP å¤„ç†ç¨‹åº
- `reminder_handlers.go`: æé†’ HTTP å¤„ç†ç¨‹åº
- `dashboard_handlers.go`: ä»ªè¡¨æ¿ HTTP å¤„ç†ç¨‹åº
- `middleware.go`: è®¤è¯å’Œæ—¥å¿—ä¸­é—´ä»¶

### ğŸ”§ å…³é”®æŠ€æœ¯ç‰¹æ€§

#### æ™ºèƒ½æé†’è°ƒåº¦å™¨
```go
type ReminderScheduler struct {
    db           *mongo.Database
    ticker       *time.Ticker
    stopChan     chan bool
    isRunning    bool
}
```
- åŸºäº Ticker çš„å®šæ—¶ä»»åŠ¡
- æ”¯æŒé‚®ä»¶å’Œåº”ç”¨å†…é€šçŸ¥
- é”™è¯¯é‡è¯•æœºåˆ¶
- ä¼˜é›…å¯åœç®¡ç†

#### ä»»åŠ¡ä¼˜å…ˆçº§ç®—æ³•
```go
func (s *TaskSortService) CalculateTaskPriority(task Task, config TaskSortConfig) float64 {
    urgencyScore := calculateUrgencyScore(task.DueDate)
    importanceScore := float64(task.Priority) / 10.0
    
    return urgencyScore*config.WeightUrgent + 
           importanceScore*config.WeightImportant
}
```
- åŸºäºæ—¶é—´ç´§æ€¥åº¦å’Œé‡è¦æ€§çš„æ™ºèƒ½æ’åº
- ç”¨æˆ·å¯é…ç½®æƒé‡å‚æ•°
- æ”¯æŒè‡ªå®šä¹‰ä¼˜å…ˆçº§ç­–ç•¥

#### äº‹ä»¶å¾ªç¯æ¨¡å¼
```go
type RecurrencePattern struct {
    Enabled   bool      `bson:"enabled" json:"enabled"`
    Pattern   string    `bson:"pattern" json:"pattern"`       // daily, weekly, monthly, yearly
    Interval  int       `bson:"interval" json:"interval"`     // é—´éš”æ•°
    EndDate   time.Time `bson:"end_date" json:"end_date"`
}
```
- æ”¯æŒæ—¥ã€å‘¨ã€æœˆã€å¹´åº¦é‡å¤
- çµæ´»çš„é—´éš”é…ç½®
- å¯è®¾ç½®ç»“æŸæ—¥æœŸ

### ğŸ“Š API ç«¯ç‚¹æ€»è§ˆ

| æ¨¡å— | ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|------|
| äº‹ä»¶ | `/api/events` | POST | åˆ›å»ºäº‹ä»¶ |
| äº‹ä»¶ | `/api/events` | GET | è·å–äº‹ä»¶åˆ—è¡¨ |
| äº‹ä»¶ | `/api/events/{id}` | GET/PUT/DELETE | å•ä¸ªäº‹ä»¶æ“ä½œ |
| äº‹ä»¶ | `/api/events/upcoming` | GET | å³å°†åˆ°æ¥çš„äº‹ä»¶ |
| äº‹ä»¶ | `/api/events/search` | GET | æœç´¢äº‹ä»¶ |
| äº‹ä»¶ | `/api/events/calendar` | GET | æ—¥å†è§†å›¾ |
| æé†’ | `/api/reminders` | POST/GET | æé†’ç®¡ç† |
| æé†’ | `/api/reminders/{id}` | GET/PUT/DELETE | å•ä¸ªæé†’æ“ä½œ |
| æé†’ | `/api/reminders/{id}/snooze` | POST | æš‚åœæé†’ |
| æé†’ | `/api/reminders/upcoming` | GET | å³å°†å‘é€çš„æé†’ |
| ä»ªè¡¨æ¿ | `/api/dashboard` | GET | ä»ªè¡¨æ¿æ•°æ® |
| ä»ªè¡¨æ¿ | `/api/dashboard/tasks` | GET | ä¼˜å…ˆä»»åŠ¡åˆ—è¡¨ |
| ä»ªè¡¨æ¿ | `/api/dashboard/config` | GET/PUT | æ’åºé…ç½® |

### ğŸ”’ å®‰å…¨å’Œè®¤è¯

#### JWT è®¤è¯
- æ‰€æœ‰ API ç«¯ç‚¹éƒ½éœ€è¦ Bearer Token
- ç”¨æˆ·ä¼šè¯ç®¡ç†
- å®‰å…¨çš„å¯†ç å“ˆå¸Œ

#### æ•°æ®éªŒè¯
- è¾“å…¥å‚æ•°éªŒè¯
- æ•°æ®æ ¼å¼æ ¡éªŒ
- é”™è¯¯å¤„ç†å’Œå“åº”

### ğŸ“– æ–‡æ¡£å’Œæµ‹è¯•

#### API æ–‡æ¡£
- å®Œæ•´çš„ OpenAPI/Swagger æ–‡æ¡£
- è¯¦ç»†çš„ä½¿ç”¨ç¤ºä¾‹
- æ•°æ®æ¨¡å‹è¯´æ˜

#### ä»£ç è´¨é‡
- æ¸…æ™°çš„ä»£ç ç»“æ„
- å®Œæ•´çš„é”™è¯¯å¤„ç†
- ç±»å‹å®‰å…¨çš„ Go ä»£ç 

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æœ¬åœ°å¼€å‘
```bash
cd backend-go
go run cmd/api/main.go
```

### Docker éƒ¨ç½²
```bash
docker build -t todoing-backend .
docker run -p 5001:5001 --env-file .env todoing-backend
```

### ç¯å¢ƒå˜é‡
```bash
MONGO_URI=mongodb://localhost:27017
JWT_SECRET=your-secret-key
PORT=5001
DEFAULT_USERNAME=admin
DEFAULT_PASSWORD=admin123
DEFAULT_EMAIL=admin@example.com
```

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### å‰ç«¯å¼€å‘
1. React ç»„ä»¶å¼€å‘
2. äº‹ä»¶æ—¥å†ç•Œé¢
3. æé†’ç®¡ç†ç•Œé¢
4. ä»ªè¡¨æ¿æ•°æ®å¯è§†åŒ–

### åŠŸèƒ½å¢å¼º
1. é‚®ä»¶é€šçŸ¥é›†æˆ
2. ç§»åŠ¨ç«¯æ¨é€
3. æ•°æ®å¯¼å‡ºåŠŸèƒ½
4. é«˜çº§æœç´¢è¿‡æ»¤

### æ€§èƒ½ä¼˜åŒ–
1. æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
2. ç¼“å­˜å±‚æ·»åŠ 
3. API æ€§èƒ½ç›‘æ§
4. è´Ÿè½½å‡è¡¡é…ç½®

## ğŸ“ˆ æŠ€æœ¯æˆæœ

- âœ… **46ä¸ª API ç«¯ç‚¹** å®Œå…¨å®ç°
- âœ… **7ä¸ªæ ¸å¿ƒæœåŠ¡** ä¸šåŠ¡é€»è¾‘å®Œæ•´
- âœ… **5ä¸ªæ•°æ®æ¨¡å‹** æ”¯æŒå¤æ‚ä¸šåŠ¡åœºæ™¯
- âœ… **100% Go ä»£ç ** ç±»å‹å®‰å…¨ï¼Œæ€§èƒ½ä¼˜å¼‚
- âœ… **å®Œæ•´ Docker æ”¯æŒ** ä¸€é”®éƒ¨ç½²
- âœ… **è¯¦ç»† API æ–‡æ¡£** ä¾¿äºå‰ç«¯é›†æˆ

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´ã€ç°ä»£åŒ–ã€å¯æ‰©å±•çš„äº‹ä»¶æé†’ç³»ç»Ÿåç«¯å®ç°ï¼Œä¸ºç”¨æˆ·æä¾›æ™ºèƒ½åŒ–çš„æ—¥ç¨‹ç®¡ç†å’Œæé†’æœåŠ¡ã€‚ç³»ç»Ÿæ¶æ„æ¸…æ™°ï¼Œä»£ç è´¨é‡é«˜ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚
